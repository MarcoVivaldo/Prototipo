<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>CASE diStato OF&#xD;
	0:	Q_sResult:='Triggerato M100';&#xD;
		IF&#xD;
			READ_MCODE_M100.Strobe&#xD;
		THEN&#xD;
			diStato:=1;&#xD;
		END_IF;&#xD;
	1:	Q_sResult:='Attesa Motion Program in Pausa';&#xD;
		IF&#xD;
			CncCsStatus[0].Sta.CsCtrlOutputs.ExecutingStatus=_eCNC_EXECUTING_STATE#_cncHold&#xD;
		THEN&#xD;
			diStato:=2;&#xD;
		END_IF;&#xD;
	2:	Q_sResult:='Pausa da Eliminare';&#xD;
		IF&#xD;
			DELAT_M100.Q&#xD;
		THEN&#xD;
			lrSyncPosX:=_CNC_Coord[0].AxActPos.X;&#xD;
			diStato:=3;&#xD;
		END_IF;&#xD;
	3:&#xD;
		IF&#xD;
			SYNC_MOVE_X.InPosition&#xD;
		THEN&#xD;
			diStato:=4;&#xD;
		END_IF;&#xD;
	4:&#xD;
		IF&#xD;
			IFB_MOVE_BOBINATURA.Done&#xD;
		THEN&#xD;
			iNoCycli:=0;&#xD;
			diStato:=50;&#xD;
		END_IF;&#xD;
	50:&#xD;
		IF&#xD;
			lrSyncPosX&lt;280.0&#xD;
		THEN	&#xD;
			lrSyncPosX:=lrSyncPosX+0.01;&#xD;
		ELSE&#xD;
			diStato:=51;&#xD;
		END_IF;&#xD;
	51:&#xD;
		IF&#xD;
			lrSyncPosX&gt;270.0&#xD;
		THEN	&#xD;
			lrSyncPosX:=lrSyncPosX-0.01;&#xD;
		ELSE&#xD;
			iNoCycli:=iNoCycli+1;&#xD;
			diStato:=50;&#xD;
		END_IF;	&#xD;
		IF&#xD;
			iNoCycli&gt;=100&#xD;
		THEN&#xD;
			diStato:=5;&#xD;
		END_IF;	&#xD;
	5:&#xD;
		IF&#xD;
			STOP_MOVE_X.Done&#xD;
		THEN&#xD;
			diStato:=9;&#xD;
		END_IF;&#xD;
	9:&#xD;
		IF&#xD;
			NOT READ_MCODE_M100.Strobe&#xD;
		THEN&#xD;
			diStato:=10;&#xD;
		END_IF;&#xD;
	10:&#xD;
		IF&#xD;
			CncCsStatus[0].Sta.CsCtrlOutputs.ExecutingStatus=_eCNC_EXECUTING_STATE#_cncExecuting&#xD;
		THEN&#xD;
			diStato:=0;&#xD;
		END_IF;	&#xD;
END_CASE;&#xD;
&#xD;
G_xM100_FEED_HOLD:=diStato=1;&#xD;
G_xM100_CYCLE_START:=diStato=10;&#xD;
READ_MCODE_M100(&#xD;
	Coord:=_CNC_Coord[0], &#xD;
	MCode:=sMCODE, &#xD;
	Enable:=TRUE, &#xD;
	MCodeNo:=100);&#xD;
DELAT_M100(&#xD;
	In:=diStato=2, &#xD;
	PT:=T#0s);&#xD;
SYNC_MOVE_X(&#xD;
	Coord:=_CNC_Coord[0], &#xD;
	Execute:=diStato=3, &#xD;
	LogicalMotorNo:=0, &#xD;
	Position:=lrSyncPosX &#xD;
	);&#xD;
IFB_MOVE_BOBINATURA(&#xD;
	Axis:=MC_Mandrino, &#xD;
	Execute:=diStato=4, &#xD;
	Position:=36000, &#xD;
	Velocity:=3600.0, &#xD;
	Acceleration:=360.0, &#xD;
	Deceleration:=360.0, &#xD;
	Jerk:=0.0, &#xD;
	Direction:=_eMC_DIRECTION#_mcNoDirection, &#xD;
	BufferMode:=_eMC_BUFFER_MODE#_mcAborting);&#xD;
STOP_MOVE_X(&#xD;
	Coord:=_CNC_Coord[0], &#xD;
	Execute:=diStato=5, &#xD;
	Deceleration:=alrDEC);&#xD;
RESET_MCODE(&#xD;
	Coord:=_CNC_Coord[0], &#xD;
	Execute:=diStato=9 &#xD;
	);</Text></StructuredTextModel>