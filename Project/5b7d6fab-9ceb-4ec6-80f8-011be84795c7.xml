<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>Inst_R_TRIG(Clk:=Execute);&#xD;
&#xD;
IF Inst_R_TRIG.Q AND NOT(wExecuting) THEN&#xD;
	wExeOpen:=TRUE;&#xD;
	wStateNo:=UINT#1;&#xD;
	wFileName:=FileName;&#xD;
	wErrorID:=WORD#0000;&#xD;
	wExecuting:=TRUE;&#xD;
ELSIF NOT(Execute) AND NOT(wExecuting) THEN&#xD;
	wStateNo:=UINT#0;&#xD;
	wIdx:=UINT#0;&#xD;
	wExeOpen:=FALSE;&#xD;
	wExePuts:=FALSE;&#xD;
	wExeClose:=FALSE;&#xD;
END_IF;&#xD;
&#xD;
CASE wStateNo OF&#xD;
    1:	//FileOpen&#xD;
		IF wOutput_Open.Error THEN&#xD;
			wExeOpen:=FALSE;&#xD;
			wStateNo:=UINT#9;&#xD;
			wErrorID:=wOutput_Open.ErrorID;&#xD;
		ELSIF wOutput_Open.Done THEN&#xD;
			wExeOpen:=FALSE;&#xD;
			wStr:=CONCAT( REAL_TO_STRING(CompTable[0]), ',', '$r$l' );&#xD;
			wIdx:=UINT#1;&#xD;
			wExePuts:=TRUE;&#xD;
			wStateNo:=UINT#2;&#xD;
		END_IF;&#xD;
&#xD;
	2:	//FilePuts&#xD;
		wExePuts:=TRUE;&#xD;
		IF wOutput_Puts.Error THEN&#xD;
			wExePuts:=FALSE;&#xD;
			wExeClose:=TRUE;&#xD;
			wStateNo:=UINT#4;&#xD;
			wErrorID:=wOutput_Puts.ErrorID;&#xD;
		ELSIF wOutput_Puts.Done THEN&#xD;
			wExePuts:=FALSE;&#xD;
			IF wIdx&lt;UINT#100 THEN&#xD;
				wStr:=CONCAT( REAL_TO_STRING(CompTable[wIdx]), ',', '$r$l' );&#xD;
			ELSE&#xD;
				wStateNo:=UINT#3;&#xD;
				wExeClose:=TRUE;&#xD;
			END_IF;&#xD;
			Inc(wIdx);&#xD;
		END_IF;&#xD;
	&#xD;
	3:	//FileClose&#xD;
		IF wOutput_Close.Error THEN&#xD;
			wExeClose:=FALSE;&#xD;
			wStateNo:=UINT#9;&#xD;
			wErrorID:=wOutput_Close.ErrorID;&#xD;
		ELSIF wOutput_Close.Done THEN&#xD;
			wExeClose:=FALSE;&#xD;
			wStateNo:=UINT#5;&#xD;
		END_IF;&#xD;
&#xD;
	4:	//Error-&gt;FileClose&#xD;
		IF wOutput_Close.Error OR wOutput_Close.Done THEN&#xD;
			wExeClose:=FALSE;&#xD;
			wStateNo:=UINT#9;&#xD;
		END_IF;&#xD;
		&#xD;
	5:	//Done&#xD;
		IF NOT(Execute) THEN&#xD;
			wStateNo:=0;&#xD;
			wExecuting:=FALSE;&#xD;
		END_IF;&#xD;
	&#xD;
	9:	//Error&#xD;
		IF NOT(Execute) THEN&#xD;
			wStateNo:=0;&#xD;
			wExecuting:=FALSE;&#xD;
		END_IF;&#xD;
ELSE&#xD;
    ;&#xD;
END_CASE;&#xD;
&#xD;
//Instance&#xD;
Inst_FileOpen(&#xD;
	Execute:=wExeOpen,&#xD;
	FileName:=wFileName,&#xD;
	Mode:=_eFOPEN_MODE#_WRITE_CREATE,&#xD;
	Done=&gt;wOutput_Open.Done,&#xD;
	Busy=&gt;wOutput_Open.Busy,&#xD;
	Error=&gt;wOutput_Open.Error,&#xD;
	ErrorID=&gt;wOutput_Open.ErrorID,&#xD;
	FileID=&gt;wFileID);&#xD;
&#xD;
Inst_FilePuts(&#xD;
	Execute:=wExePuts,&#xD;
	FileID:=wFileID,&#xD;
	In:=wStr,&#xD;
	Done=&gt;wOutput_Puts.Done,&#xD;
	Busy=&gt;wOutput_Puts.Busy,&#xD;
	Error=&gt;wOutput_Puts.Error,&#xD;
	ErrorID=&gt;wOutput_Puts.ErrorID);&#xD;
&#xD;
Inst_FileClose(&#xD;
	Execute:=wExeClose,&#xD;
	FileID:=wFileID,&#xD;
	Done=&gt;wOutput_Close.Done,&#xD;
	Busy=&gt;wOutput_Close.Busy,&#xD;
	Error=&gt;wOutput_Close.Error,&#xD;
	ErrorID=&gt;wOutput_Close.ErrorID);&#xD;
&#xD;
//Output&#xD;
Done:=cOutVal[0, wStateNo];&#xD;
Busy:=cOutVal[1, wStateNo];&#xD;
Error:=cOutVal[2, wStateNo];&#xD;
ErrorID:=wErrorID;</Text></StructuredTextModel>